## 目的
データ処理指示書によって作成されたwordList.txt、および単語のメタデータを付与したデータのバリをとる。

## バリをとる方針

### 前提（厳守）
- 情報源は `output/XX_企業名/` 配下にコピーした **有報PDFのみ**
- 外部サイト・一般辞書・推測補完はしない（言い換えはOK、追加知識はNG）

### 確認した出力（2社）
- `tools/みえるマン用語集の作成/IR資料から用語の切り出し/output/13_タイミー/wordList/wordList.txt`
- `tools/みえるマン用語集の作成/IR資料から用語の切り出し/output/13_タイミー/metadata/wordList.jsonl`
- `tools/みえるマン用語集の作成/IR資料から用語の切り出し/output/02_ニトリホールディングス/wordList/wordList.txt`
- `tools/みえるマン用語集の作成/IR資料から用語の切り出し/output/02_ニトリホールディングス/metadata/wordList.jsonl`

---

## 1. wordList.txt（用語）のバリ取り観点

### 1) EDINET/表紙/提出情報の混入（最優先で除去）
有報のヘッダーや表紙の定型文が高頻度で混入し、上位に上がってくる。
- 例: `EDINET` / `EDINET提出書類` / `提出書類` / `有価証券報告` / `証券報告`
- 例: `タイミー(E39760)` / `ニトリホールディングス(E03144)` / `E03144)` / `(E39760)`

方針：
- `EDINET` を含む語は原則削除
- `E\\d{5}`（EDINETコード）を含む語は原則削除
- `【表紙】` や `【提出先】` 等の“提出書類フォーム文言”由来の語は原則削除

### 2) 日付・期間・ページ由来の断片（原則除去）
月日や決算期などが「断片」として残り、用語として無意味になりやすい。
- 例: `4月1` / `10月31` / `月31` / `年度(` / `1)` / `2)`

方針：
- `\\d+月\\d*(日)?` や `\\d+/\\d+` 等、日付/期間っぽい断片は原則削除
- 章番号・ページ番号・脚注番号の断片（例: `1)` / `2)` / `1/165` 相当）は原則削除

### 3) 単位・記号・括弧の断片（原則除去）
PDFの表や注記から、括弧や単位だけが語として抽出される。
- 例: `(株)` / `株)` / `(円)` / `円)` / `(単位:` / `単位:` / `)2`

方針：
- 単位/注記の断片っぽい語は原則削除
- 丸ごと括弧を含む語は、まず「EDINETコード/単位/注記/脚注」の可能性を疑い、該当するなら削除

### 4) 汎用語（意味が薄い語）の間引き
抽出は“名詞中心”のため、一般語が大量に混入する（企業分析の用語として価値が低い）。
- 例: `会社` / `期間` / `事項` / `可能` / `状況` / `方法` / `当該` / `上記` / `記載` / `提出` / `書類`

方針：
- 「どの有報でも出る」「説明文の接着剤になっている」一般語は削除寄り
- 迷う語は、次の優先順位で残す/落とす
  - 企業固有（サービス名/組織名/独自指標）なら残す
  - 会計・開示・リスク・ガバナンスの専門語なら残す
  - それ以外の一般語は落とす

### 5) 会社名・ブランド名の扱い
会社名や略称が頻出し上位に出やすい。
- 例: `ニトリ`（略称）、`タイミー`（サービス/社名）

方針：
- 会社名そのもの（または EDINETコード付き）は原則削除（用語集としての再利用性が低い）
- プロダクト/サービス名として意味がある場合は残す（ただし“社名の単なる繰り返し”になっていないか確認）

---

## 2. metadata/wordList.jsonl（description/metadata）のバリ取り観点

### 1) description が「表紙/提出フォーム」由来になっている
上位語ほど `description` が表紙の定型文・住所・電話番号・役職氏名になりがちで、用語の説明になっていない。
- 例（混入しやすい要素）: `EDINET提出書類` / `【表紙】` / `【提出日】` / `関東財務局長` / 住所（`東京都` 等）/ 電話番号

方針：
- description が“提出フォーム/会社基本情報”っぽい場合は、description を **削除（空にするのではなくフィールド自体を落とす）**
- description は「有報内でのニュアンス」優先だが、ノイズを無理に整形して“説明っぽく書き換える”のは禁止（追加知識になりやすい）

### 2) description が途中で切れている/意味が薄い
PDF抽出の都合で文が途中で切れたり、数字表だけが取れたりする。

方針：
- 文として成立していない/数字だらけの場合は description を削除
- 逆に、注記や定義文として成立している短文は残す

### 3) metadata（pos/conceptType/category）の整合
現状は自動推定が混じるため、誤分類が起きる前提で扱う。

方針：
- バリ取り段階では、まず「語として妥当か」を優先して残す/落とす
- conceptType/category は後工程（正規化・Concept化）で本格調整する前提。ただし明らかな誤りは修正してよい

---

## 3. 作業の進め方（おすすめ）
1. `wordList/wordList.txt` を上から見て、EDINET/コード/日付/単位/脚注の断片を先に削除
2. 次に汎用語（会社/期間/事項/当該…）を間引き、専門語・企業固有語を残す
3. `metadata/wordList.jsonl` は、落とした語を削除し、description ノイズ（表紙/提出フォーム由来）を削除
4. 迷った判断は `output/XX_企業名/worklog.md` にメモしておく（後工程で見直せるように）



